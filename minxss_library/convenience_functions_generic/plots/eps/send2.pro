pro send2, pno, HELP=HELP, NOPRINT=NOPRINT;This procedure sends the plot file to the QMS. It also closes the plot;file, therefore after using the "SEND" procedure you must use the "QMS";procedure again to send other plots to the QMS.; Keywords;   help - set this keyword to receive help on using this routine;   noprint - set this to inhibit printing; Change log;   B. Knapp, 2001-08-15, IDL v. 5 compliance; remove departed users;   Sean Davis, 2003-01-22, added NOPRINT keyworddebug = 0delete_spec=''if not(keyword_set(noprint)) then beginif (keyword_set(help)) then begin   message, 'Usage is: send2, printername', /info   tab = string(9b)   print, tab + 'Valid printers are:'   printers = ['lwp','lwc','lwk','clwb','lwn']   for i = 0, n_elements(printers) - 1 do begin      print, tab + '    ' + printers[i]   endfor   print, ' '   returnendifif (n_params() eq 0) then begin   ; get the user's login name and set the appropriate printer   case strupcase(!version.os) of      'VMS': $         begin            user = getenv('USER')            case strtrim(strupcase(user),2) of              'GROTTMAN': pno = 'lwc'              'GRIESTK':  pno = 'lwn'              'TSPARN':   pno = 'lwc'              'RODGERSR': pno = 'lwc'              'KNAPP':    pno = 'lwp'              'BBOYLE':   pno = 'lwc'              'ENG_DATA': pno = 'lwc'              'TWOODS':   pno = 'lwp'              'DIXONC':   pno = 'lwc'              'REDFERNJ': pno = 'lwn'	      'WINDNAGE': pno = 'lwc'	      'SEAND'   : pno = 'lwc'              else:       pno = 'lwc'            endcase         end      'SUNOS': $         begin            user = getenv('USER')            case strtrim(strupcase(user),2) of              'GROTTMAN': pno = 'lwc'              'PANKRATZ': pno = 'lwc'              'GRIESTK':  pno = 'lwn'              'TSPARN':   pno = 'lwc'              'RICHARDL': pno = 'lwk'              'RODGERSR': pno = 'lwc'              'KNAPP':    pno = 'lwp'              'BBOYLE':   pno = 'lwc'              'ENG_DATA': pno = 'lwc'              'TWOODS':   pno = 'lwp'	      'KUNGSAKN': pno = 'lwn'               'DIXONC':   pno = 'lwc'              'REDFERNJ': pno = 'lwn'              'CADIEUX' : pno = 'lwp'              'LILLIANC' : pno = 'lwc'	      'SMILKSTE' : pno = 'lwc'	      'SEAND'    : pno = 'lwc'              else:       pno = 'lwp'            endcase         end      else: $        begin          user = ''          pno = 'lwc'        end   endcaseendifif (debug) then help, pnoendif				;if keyword noprint is not set;file disposition & printer infocommon qmsinfo, delete, type, org_type, filename, pcolor, pbackgroundif ( n_elements(type) eq 0 ) then returnif ( strlen(type) le 0 ) then returndevice,/closeset_plot, org_typeif not(keyword_set(noprint)) then beginif (type eq 'EMF') then begin   returnendif; support the old lw_a and lw_b definitionsif (strtrim(strupcase(pno),2) eq 'A') then begin   pno = 'lwc'endif else if (strtrim(strupcase(pno),2) eq 'B') then begin   pno = 'lwc'endif; do nothing for EPS type (save only as file);help, n_params()if (type eq 'CPS') then begin   case strupcase(!version.os) of      'VMS': if (n_params() lt 1) then pno = 'clwb' ELSE pno = 'clwb'      'SUNOS': if (n_params() lt 1) then pno = 'clwb' ELSE pno = 'clwb'       else:  pno = 'clwb'   endcaseendifif (debug) then help, pno, filename, delete_spec;if (debug) then stopif (type ne 'EPS') then begin   if (debug) then print, 'Sending output to printer'   case strupcase(!version.os) of      'VMS': $         begin            if (delete) then delete_spec = '/delete'            spawn, pno + delete_spec + ' ' + filename         end      'SUNOS': $         begin            ;spawn, '\lp -c -o nobanner -d ' + pno + ' ' + filename            spawn, '\lp -c -d ' + pno + ' ' + filename            if (delete) then begin               if (debug) then print, 'deleting Postscript file...'               spawn, '\rm ' + filename            endif         end       else: print, 'send2 cannot send output to printer.  System not specified.'   endcaseendiftype = ''endif				;if keyword noprint is not set;Restore original plotting colors!P.COLOR = pcolor!P.BACKGROUND = pbackgroundreturnend